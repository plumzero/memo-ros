
根据 ROS 系统代码的维护者和分布者来标示，ROS 主要有两大部分。
- main: 核心部分，主要由 Willow Garage 公司和一些开发者设计、提供以及维护。它提供了一些分布式计算的基本工具，以及整个 ROS 核心部分的程序。
- universe: 全球范围的代码，由不同国家的 ROS 社区组织开发和维护。

如果从另一个角度对 ROS 分级，主要可分为 3 个级别: 计算图级、文件系统级、社区级。具体如下。

### 1 计算图级

计算图级是 ROS 处理数据的一种点对点的网络形式。程序运行时，所有进程以及它们所进行的数据处理，都将会通过一种点对点的网络形式表现出来。这一级主要包括几个重要概念: 节点(node)、消息(message)、主题(topic)、服务(service)，

1) 节点

节点是一些执行运算任务的进程。ROS 利用规模可增长的方式使代码模块化: 一个典型系统由很多节点组成。在这里，节点也可以被称为软件模块。节点的称呼使得基于 ROS 的系统在运行时更加形象化: 当许多节点同时运行时，可以方便地将端对端的通信绘制成一个图表，在这个图表中，进程就是图中的节点，而端对端的连接关系由其中的弧线连接表现。

2) 消息

节点之间通过传送消息进行通信。如下图表示。每一个消息都是一个严格的数据结构。原有标准的数据类型(如整型、浮点型、布尔型等)都是支持的，同时也支持原始数组类型。消息可以包含任意的嵌套结构和数组。

![](img/ROS的消息.jpg)

3) 主题

消息以一种发布或订阅的方式传递。一个节点可以在一个给定的主题中发布消息。一个节点针对某个主题关注与订阅特定类型的数据。可能同时有多个节点发布或者订阅同一个主题的消息。总体上，发布者和订阅者不了解彼此的存在。

4) 服务

虽然基于主题的发布或订阅模型是很灵活的通信模式，但是它广播式的路径规划对于可以简化节点设计的同步传输模式并不适合。在 ROS 中，一项服务用一个字符串和一对严格规范的消息定义: 一个用于请求，一个用于回应。

在上面概念的基础上，需要有一个控制器可以使所有节点有条不紊地执行，这个控制器被称为 ROS 控制器(ROS Master)。ROS Master 通过 RPC 提供登记列表和对其他计算图级的查找。没有控制器，一个节点将无法找到其他节点，并交换消息或调用服务。控制节点订阅和发布消息的模型如下图所示。

![](img/控制节点订阅和发布消息的模型.jpg)

ROS 的控制器给 ROS 的节点存储了主题和服务的注册信息。节点与控制器通信报告它们的注册信息。当这些节点与控制器通信的时候，它们可以接收关于其他已注册节点的信息，并且建立与其他已注册节点之间的联系。当这些注册信息改变时控制器也会回馈节点，同时允许节点动态创建与新节点之间的连接。

节点与节点之的连接是直接的，控制器仅仅提供了查询信息，就像一个 DNS 服务器。节点订阅一个主题会要求建立一个与发布该主题的节点的连接，并且将会在同意连接协议的基础上建立该连接。

### 2 文件系统级

ROS 系统中有无数的节点、消息、服务、工具和库文件，需要有效的结构去管理这些代码。在 ROS 的文件系统级，有以下两个重要概念: 包(package)、堆(stack)。

1) 包

ROS 的软件以包的形式组织。每个包里包含节点、ROS 依赖库、数据套、配置文件、第三方软件或者任何其他逻辑。包的目标是提供一种易于使用的结构以便其软件的重复使用。总的来说，ROS 的包短小精干。

2) 堆

堆是包的集合，它提供一个完整的功能。堆与版本号关联，同时也是如何发行 ROS 软件的关键方式。

### 3 社区级

ROS 的社区级概念是 ROS 网络上进行代码发布的一种表现形式。